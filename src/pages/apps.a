
print "[CONSOLE_OS] Setting up apps page ...\n";

Console_page->var console_pages_apps_list = new(Console_page).construct();
	Console_page->var console_pages_settings_app = new(Console_page).construct();
		Console_page->var console_pages_settings_app_theme = new(Console_page).construct();
		
		Console_page->var console_pages_settings_app_wifi = new(Console_page).construct();
		Console_page->var console_pages_settings_app_wifi_password = new(Console_page).construct();

func console_pages_apps_init {
	console_pages_apps_list.set_title "Applications";
	console_pages_apps_list.set_cards 3;
	
	/* settings application*/ {
		console_pages_settings_app.set_title "Settings";
		console_pages_settings_app.set_cards 2;
		
		/* settings->themes */ {
			console_pages_settings_app_theme.set_title "Choose a theme";
			console_pages_settings_app_theme.set_cards console_theme_count + 1;
			
			console_pages_settings_app_theme.set_card_text 0, "Install themes";
			
			var index = -1;
			while ((index = index + 1) < console_theme_count) {
				console_pages_settings_app_theme.set_card_text index + 1, (Console_theme->?(console_theme_list + 8 * index)).name;
				console_pages_settings_app_theme.set_card_select index + 1, console_set_theme, ?(console_theme_list + 8 * index);
			}
		}
		
		console_pages_settings_app.set_card_text 0, "Themes";
		console_pages_settings_app.set_card_next 0, console_pages_settings_app_theme;
		
		/* settings->wifi */ {
			console_pages_settings_app_wifi.set_title "Choose a WiFi network";
			console_pages_settings_app_wifi.set_cards 3;
			
			console_pages_settings_app_theme.set_card_text 0, "Install themes";
			
			var index = -1;
			while ((index = index + 1) < console_theme_count) {
				console_pages_settings_app_theme.set_card_text index + 1, (Console_theme->?(console_theme_list + 8 * index)).name;
				console_pages_settings_app_theme.set_card_select index + 1, console_set_theme, ?(console_theme_list + 8 * index);
			}
		}
		
		console_pages_settings_app.set_card_text 0, "Themes";
		console_pages_settings_app.set_card_next 0, console_pages_settings_app_theme;
	}
	
	console_pages_apps_list.set_card_text 0, "Settings";
	console_pages_apps_list.set_card_next 0, console_pages_settings_app;
	
	console_pages_apps_list.set_card_text 1, "Store";
	console_pages_apps_list.set_card_text 2, "Emulators";
	
	console_pages_apps_list.set_prev console_desktop_show, 1;
}

func console_pages_apps_show {
	console_pages_apps_list.show 0;
}

func console_pages_apps_draw(var fps) {
	console_pages_apps_list         .draw fps;
	console_pages_settings_app      .draw fps;
	console_pages_settings_app_theme.draw fps;
}
